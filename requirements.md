\# 要件定義書：AIスライド修正ツール "Slide Patcher"



\*\*バージョン\*\*: 2.0

\*\*作成日\*\*: 2025年12月21日

\*\*プロジェクト概要\*\*: NotebookLM等のAI生成スライドを、画像としてではなく「編集可能なスライド」として修正・再出力するツールの開発。



---



\## 1. プロジェクト概要



\### 1.1 背景・課題 (Why)

AI（NotebookLMやNano Banana Pro等）が生成するスライドは、品質は高いが\*\*「一枚の画像」として出力されるため編集が困難\*\*である。

\- 誤字脱字の修正のために、プロンプト調整と再生成を繰り返すのは非効率。

\- PowerPoint上で画像の上に図形を乗せて隠す作業は、枚数が多いと非常に手間がかかる。



\### 1.2 コンセプト (How)

\*\*「アナログな修正作業を、デジタルで爆速化する」\*\*

既存のスライド画像に対し、以下の3ステップで修正を行うモダンなWebツールを提供する。

1\. \*\*隠す\*\*: 修正テープ（白塗り）で不要な部分を消す。

2\. \*\*書く\*\*: その上に新しいテキストを乗せる（OCRで元テキストを吸い出し可能）。

3\. \*\*戻す\*\*: 編集結果をレイヤー構造を保ったままPowerPointファイルとして書き出す。



---



\## 2. ユーザー体験フロー (UX)



1\. \*\*Drop (読み込み)\*\*

&nbsp;  - PDFファイルをブラウザにドラッグ＆ドロップする。

&nbsp;  - 即座にスライド一覧が表示される。



2\. \*\*Erase (修正)\*\*

&nbsp;  - 直したい箇所を「修正テープツール」でなぞる。

&nbsp;  - 自動的に背景色に馴染む色で塗りつぶされる。



3\. \*\*Scan \& Edit (編集)\*\*

&nbsp;  - そのままテキストを入力するか、「マジックOCR」で範囲選択する。

&nbsp;  - OCRの場合、画像内の文字が解析され、即座に編集可能なテキストボックスに変換される。



4\. \*\*Export (出力)\*\*

&nbsp;  - 「PPTX保存」ボタンを押す。

&nbsp;  - 修正内容は「画像」ではなく「PowerPointの図形・テキストボックス」として保存され、再利用性が担保される。



---



\## 3. 機能要件



\### 3.1 画面構成



| エリア | 機能概要 |

| :--- | :--- |

| \*\*ヘッダー\*\* | ツール切り替え、ファイル操作、エクスポートボタン |

| \*\*左サイドバー\*\* | スライドサムネイル一覧（ページ移動・並べ替え） |

| \*\*メインキャンバス\*\* | スライド表示・編集エリア（ズーム/パン対応） |

| \*\*プロパティパネル\*\* | 選択中のテキストや図形の微調整（必要な時だけ表示） |



\### 3.2 ツール機能詳細



| ID | ツール名 | 挙動・仕様 | 優先度 |

|:---|:---|:---|:---|

| \*\*T-01\*\* | \*\*修正テープ (Mask)\*\* | マウスドラッグ範囲に矩形または自由描画を配置し、下の画像を隠す。デフォルト色は「白」だが変更可能。 | \*\*Core\*\* |

| \*\*T-02\*\* | \*\*マジックOCR (Scan)\*\* | 範囲選択箇所をOCR解析し、\*\*同じ位置・近似フォントサイズで「テキストボックス」を生成\*\*する。 | \*\*Core\*\* |

| \*\*T-03\*\* | \*\*テキスト (Text)\*\* | クリックした位置に新規テキストボックスを追加する。 | 必須 |

| \*\*T-04\*\* | \*\*スポイト (Picker)\*\* | スライド内の任意の色を取得し、修正テープや文字色に適用する。 | 高 |

| \*\*T-05\*\* | \*\*選択/移動 (Select)\*\* | オブジェクトの移動・リサイズ・削除を行う。 | 必須 |



\### 3.3 データ処理・出力仕様



\#### A. PDF読み込み

\- ライブラリ: `pdfjs-dist` (PDF.js)

\- 仕様: OCR精度向上のため、`viewport scale` を2.0以上に設定し高解像度でCanvas描画する。



\#### B. OCR処理

\- ライブラリ: `tesseract.js`

\- 仕様: サーバーへのデータ送信を行わず、全てブラウザ内で処理する（セキュリティ重視）。日本語・英語対応。



\#### C. PPTX出力

\- ライブラリ: `pptxgenjs`

\- 仕様: 以下のレイヤー順序で構成された `.pptx` ファイルを生成する。

&nbsp;   1. \*\*最背面\*\*: 元のスライド画像（背景）

&nbsp;   2. \*\*中間層\*\*: 修正テープ（枠線なしの図形オブジェクト）

&nbsp;   3. \*\*最前面\*\*: テキストボックス（編集可能なテキストオブジェクト）



---



\## 4. 技術スタック



\- \*\*Frontend\*\*: React, TypeScript, Vite

\- \*\*Styling\*\*: Tailwind CSS

\- \*\*Icons\*\*: Lucide React

\- \*\*Core Libraries\*\*:

&nbsp;   - `pdfjs-dist`: PDFレンダリング

&nbsp;   - `tesseract.js`: ブラウザ内OCR

&nbsp;   - `pptxgenjs`: PowerPoint生成

&nbsp;   - HTML5 Canvas API: 描画ロジック



---



\## 5. 開発ロードマップ



\### Phase 1: MVP (基本機能)

\- \[ ] プロジェクト環境構築 (Vite + React + TS)

\- \[ ] PDFドラッグ＆ドロップ読み込み機能

\- \[ ] Canvasへのスライド描画

\- \[ ] 「修正テープ（白塗り矩形）」の実装

\- \[ ] 「テキストボックス」の配置実装

\- \[ ] PPTX形式でのダウンロード機能



\### Phase 2: OCR実装

\- \[ ] Tesseract.js の導入とWorker設定

\- \[ ] 範囲選択 UI の実装

\- \[ ] 選択範囲の画像切り出しとOCR実行処理

\- \[ ] 認識テキストのCanvas上への反映



\### Phase 3: UX改善

\- \[ ] スポイト機能

\- \[ ] Undo/Redo (操作の取り消し)

\- \[ ] キーボードショートカット

\- \[ ] ズーム・パン機能

